{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/ata/ins_post_creator/post_kidsai/src/app/api/generate/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { prompt } = await req.json();\r\n\r\n    // .env.local dosyasından API anahtarını alıyoruz\r\n    const apiKey = process.env.GEMINI_API_KEY;\r\n    \r\n    if (!apiKey) {\r\n      return NextResponse.json(\r\n        { error: 'Gemini API Key bulunamadı. Lütfen .env.local dosyasını kontrol edin.' },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    // Gemini'ye gönderilecek sistem talimatı\r\n    const systemInstruction = `\r\n      You are a World-Class UI/UX Designer and Creative Director.\r\n      Your task is to generate a JSON object for a slide based on the user's prompt.\r\n      \r\n      The JSON must strictly follow this structure:\r\n      {\r\n        \"id\": \"string (unique)\",\r\n        \"layoutId\": \"one of ['hero-v1', 'classic-v1', 'smart-v1']\",\r\n        \"themeColor\": \"one of ['cyan', 'rose', 'purple', 'indigo', 'emerald', 'amber']\",\r\n        \"customTheme\": {\r\n           \"bg\": \"Tailwind class for background (e.g., bg-slate-900 or bg-gradient-to-r...)\",\r\n           \"title\": \"Tailwind class for title color (e.g., text-white)\",\r\n           \"blob\": \"Tailwind class for blob color (e.g., bg-purple-500)\"\r\n        },\r\n        \"decorations\": [\r\n           { \r\n             \"type\": \"one of ['blob', 'star', 'cloud', 'sparkle', 'camera', 'zap', 'circle']\", \r\n             \"className\": \"Tailwind classes for position, size, color, animation (e.g., 'absolute top-10 left-10 w-20 h-20 text-yellow-400 animate-bounce')\" \r\n           }\r\n        ],\r\n        \"content\": {\r\n          \"tr\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"en\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"de\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"es\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"fr\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"ja\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"ko\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" },\r\n          \"ar\": { \"title\": \"\", \"subtitle\": \"\", \"cta\": \"\", \"description\": \"\", \"rating\": \"\" }\r\n        },\r\n        \"phone\": {\r\n          \"transform\": { \"x\": number, \"y\": number, \"rotateX\": number, \"rotateY\": number, \"rotateZ\": number, \"scale\": number }\r\n        },\r\n        \"image\": {\r\n          \"url\": \"A relevant Unsplash image URL based on the topic\",\r\n          \"fit\": \"cover\",\r\n          \"transform\": { \"x\": 0, \"y\": 0, \"scale\": 1, \"rotateZ\": 0 }\r\n        }\r\n      }\r\n\r\n      DESIGN RULES (CRITICAL):\r\n      1. Translate the content meaningfully into all 8 languages.\r\n      2. VISUAL DESIGN: \r\n         - Generate a unique 'customTheme' based on the prompt (e.g., Space = dark bg, Nature = green bg).\r\n         - Generate 3 to 6 'decorations' items to create a composition. Place them randomly using 'absolute', 'top-xx', 'left-xx', 'right-xx'.\r\n         - Use 'blob' type for large background blurs (w-96 h-96 blur-3xl).\r\n         - Use icons (star, cloud, zap) for details.\r\n      3. 3D COMPOSITION (IMPORTANT): You MUST change the 'phone.transform' values to create a unique scene.\r\n         - For 'Dynamic/Fun' topics: Use tilted angles (e.g., rotateY: 15, rotateZ: -5, y: 30).\r\n         - NEVER return all zeros. Be creative with X, Y, and Rotations.\r\n      4. IMAGE: Use a high-quality Unsplash URL: 'https://images.unsplash.com/photo-...?auto=format&fit=crop&w=800&q=80'. \r\n         - Search for specific keywords related to the prompt.\r\n         - Adjust 'image.transform' if needed (e.g., scale: 1.2 to zoom into the photo).\r\n      5. Return ONLY the JSON object.\r\n    `;\r\n\r\n    // Gemini API Çağrısı\r\n    // Model ismi düzeltildi: gemini-1.5-flash (2.5 henüz yok)\r\n    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${apiKey}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        contents: [{\r\n          parts: [{ text: systemInstruction + \"\\n\\nUser Request: \" + prompt }]\r\n        }],\r\n        generationConfig: {\r\n          response_mime_type: \"application/json\"\r\n        }\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.error?.message || 'Gemini API hatası');\r\n    }\r\n\r\n    const data = await response.json();\r\n    const generatedText = data.candidates[0].content.parts[0].text;\r\n    const generatedContent = JSON.parse(generatedText);\r\n    \r\n    generatedContent.id = `ai-${Date.now()}`;\r\n\r\n    return NextResponse.json(generatedContent);\r\n\r\n  } catch (error: any) {\r\n    return NextResponse.json({ error: error.message || 'Bir hata oluştu' }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,IAAI,IAAI;QAEjC,iDAAiD;QACjD,MAAM,SAAS,QAAQ,GAAG,CAAC,cAAc;QAEzC,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuE,GAChF;gBAAE,QAAQ;YAAI;QAElB;QAEA,yCAAyC;QACzC,MAAM,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsD3B,CAAC;QAED,qBAAqB;QACrB,0DAA0D;QAC1D,MAAM,WAAW,MAAM,MAAM,CAAC,6FAA6F,EAAE,QAAQ,EAAE;YACrI,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU;oBAAC;wBACT,OAAO;4BAAC;gCAAE,MAAM,oBAAoB,uBAAuB;4BAAO;yBAAE;oBACtE;iBAAE;gBACF,kBAAkB;oBAChB,oBAAoB;gBACtB;YACF;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,MAAM,IAAI,MAAM,UAAU,KAAK,EAAE,WAAW;QAC9C;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,MAAM,gBAAgB,KAAK,UAAU,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI;QAC9D,MAAM,mBAAmB,KAAK,KAAK,CAAC;QAEpC,iBAAiB,EAAE,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;QAExC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAE3B,EAAE,OAAO,OAAY;QACnB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO,IAAI;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACxF;AACF","debugId":null}}]
}